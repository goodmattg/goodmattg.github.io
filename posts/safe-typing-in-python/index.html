<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Lessons Learned using MyPy in Production | Matt's Log</title><meta name=keywords content><meta name=description content="Lessons learned used MyPy in production"><meta name=author content="Matt Goodman"><link rel=canonical href=https://goodmattg.github.io/posts/safe-typing-in-python/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css integrity="sha256-7I2jZsovtkdTfMt6j2+ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://goodmattg.github.io/magnet.ico><link rel=icon type=image/png sizes=16x16 href=https://goodmattg.github.io/magnet-16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://goodmattg.github.io/magnet-32x32.ico><link rel=apple-touch-icon href=https://goodmattg.github.io/magnet-apple-touch-icon.png><link rel=mask-icon href=https://goodmattg.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Lessons Learned using MyPy in Production"><meta property="og:description" content="Lessons learned used MyPy in production"><meta property="og:type" content="article"><meta property="og:url" content="https://goodmattg.github.io/posts/safe-typing-in-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-07T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-07T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lessons Learned using MyPy in Production"><meta name=twitter:description content="Lessons learned used MyPy in production"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://goodmattg.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Lessons Learned using MyPy in Production","item":"https://goodmattg.github.io/posts/safe-typing-in-python/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Lessons Learned using MyPy in Production","name":"Lessons Learned using MyPy in Production","description":"Lessons learned used MyPy in production","keywords":[],"articleBody":" When we talk about type safety in the context of statically typed languages, we mean that the language builds in a typing checking mechanism into the compiler. No type-check, no compilation.\nBut in the context of research / algorithms oriented software that has no uptime requirements, the bias coming out of academia is to get the math into code, these days Python, and put it in production. Python is dynamically typed and has no type inference… so the typing is optional. What Mypy users rarely discuss is the cognitive burden of maintaining the type system that is separate from the code. With a lot of tasks on your plate and new features you are waiting to start, sometimes it feels silly to type annotate Python. Is this really necessary?\n1 2 3 4 5 6 7 8  def(a):  print(a)  return  # With types def(a: int) - None:  print(a)  return   The situation we experience more often is that the simple and obvious functions get type annotated, but the complex ones that deal with uncommon types, like declaring types for decorators F = TypeVar('F', bound=Callable[..., Any]), go un-typed. And we expect this! Catching subtle bugs via the mypy type-checking mechanism is a long game.\nHighly effective teams know that type annotation is one of the best ways to make a codebase stronger. I know that’s a vague and probably incorrect word to use in the context of software, but it really feels that way in a Python codebase. Without type annotations, it’s the blind leading the blind - you need faith that variable names accurately describe the data that code will operate on. “Faith” is cold-comfort when we start talking SLA’s.\n1 2 3 4 5  def concatenate_str(x: str, y: str) - str:  return x + y  # the function name said '_str' but our data is 'int' concatenate(1, 2) - 3   prevent programmer’s from making dumb mistakes in their work. I believe that well-designed code is a force multiplier\nThe following code will type check, even though the types are wrong. Mypy is a tool for type annotation; it’s a document of what you want the types to be, and if the types are what you say they are, then the code is type safe.\nLessons So if the investment in type annotations (Mypy) only pays off with a full commitment, the most common scientific libraries are still working on type stubs, and no one has the time or willingness to fully commit, the question is, why even bother?\n1. Mindfulness is enough to prevent common mistakes Even if they go completely unused in any formal way, just making developers write types prevents dumb mistakes. For Python, this is often Optional[T] vs [T]. This is not a joke. Errors like this have led to downtime and rollbacks for production services.\n “operator ‘’ not defined for Int and None”\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  # We have a vague understanding that 'a' is an int __init__(self, val=None):  func(val)  # No types - explosion def func(a):  if a  3:  return a  else:  return -1  # Types annotations remind us that 'a' can be None. # either handle the Optional case (None), or prevent # ever invoking 'func' def func(a: Optional[int]) - int:  if a is None or a 3:  return -1  else:  return a   2. Don’t use Python for production services If your service has SLA’s or has multiple downstream services, don’t use Python. To have any chance at service stability, you’ll need to fully use MyPy, and have some CI hooks that check for type soundness and prevent non type-annotated code from deploying. Your engineers will need to have the MyPy docs open frequently to maintain the type system, and from experience, you’ll get a lot of complaints.\n “I know this code works - our test-suite passes, why am I wasting time getting MyPy to stop complaining about an unbound type?”\n If you have to maintain a type system anyways, it’s easier to choose a statically typed language where the compiler builds in type-checking. Also, most popular IDE’s for statically typed languages have type hints - so by choosing Python you’re just increasing the cognitive load for developers.\n3. Configure MyPy to prevent returning Any Developers are people, and people can be lazy. The laziest way to get around MyPy errors is to return type Any - the supertype of all types. This is like returning Any in Scala; as a last resort developers will do this to satisfy the type-checker so they can keep moving. Stop them, or at least make them annotate in code every time they really mean to return Any. Keep the MyPy file as concise as possible, but fail on any errors reported.\n1 2 3 4 5 6  # file: mypy.ini  # global options:  [mypy] warn_return_any = True   Takeways There’s truth to the criticisms of trying to use Python in production. I’ve personally found that types lead to better code, and try to avoid dynamically typed code without type annotations at all costs - the extra time it takes to reconcile types always leads to stronger production code. It isn’t static vs. dynamic, but instead interpreted vs. compiled that is the main differentiator in developer productivity.\nReferences [1] Types for anyone who knows a programming language: https://www.destroyallsoftware.com/compendium/types?share_key=baf6b67369843fa2\n","wordCount":"897","inLanguage":"en","datePublished":"2021-04-07T00:00:00Z","dateModified":"2021-04-07T00:00:00Z","author":{"@type":"Person","name":"Matt Goodman"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://goodmattg.github.io/posts/safe-typing-in-python/"},"publisher":{"@type":"Organization","name":"Matt's Log","logo":{"@type":"ImageObject","url":"https://goodmattg.github.io/magnet.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://goodmattg.github.io accesskey=h title="Matt's Log (Alt + H)">Matt's Log</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://goodmattg.github.io/posts title=Posts><span>Posts</span></a></li><li><a href=https://goodmattg.github.io/about title=About><span>About</span></a></li><li><a href=https://goodmattg.github.io/bookshelf title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://goodmattg.github.io/quotes title=Quotes><span>Quotes</span></a></li><li><a href=https://goodmattg.github.io/contact title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Lessons Learned using MyPy in Production</h1><div class=post-description>Lessons learned used MyPy in production</div><div class=post-meta><span title="2021-04-07 00:00:00 +0000 UTC">April 7, 2021</span>&nbsp;·&nbsp;Matt Goodman</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#lessons aria-label=Lessons>Lessons</a><ul><li><a href=#1-mindfulness-is-enough-to-prevent-common-mistakes aria-label="1. Mindfulness is enough to prevent common mistakes">1. Mindfulness is enough to prevent common mistakes</a></li><li><a href=#2-dont-use-python-for-production-services aria-label="2. Don&amp;rsquo;t use Python for production services">2. Don&rsquo;t use Python for production services</a></li><li><a href=#3-configure-mypy-to-prevent-returning-any aria-label="3. Configure MyPy to prevent returning Any">3. Configure MyPy to prevent returning Any</a></li></ul></li><li><a href=#takeways aria-label=Takeways>Takeways</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><hr><p>When we talk about type safety in the context of statically typed languages, we mean that the language builds in a typing checking mechanism into the compiler. No type-check, no compilation.</p><p>But in the context of research / algorithms oriented software that has no uptime requirements, the bias coming out of academia is to get the math into code, these days Python, and put it in production. Python is dynamically typed and has no type inference&mldr; so the typing is optional. What Mypy users rarely discuss is the cognitive burden of maintaining the type system that is separate from the code. With a lot of tasks on your plate and new features you are waiting to start, sometimes it feels silly to type annotate Python. Is this really necessary?</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>def(a):
</span></span><span style=display:flex><span>    <span style=color:#0087ff>print</span>(a)
</span></span><span style=display:flex><span>    <span style=color:#5f8700>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#4e4e4e># With types</span>
</span></span><span style=display:flex><span>def(a: <span style=color:#0087ff>int</span>) -&gt; <span style=color:#d75f00>None</span>:
</span></span><span style=display:flex><span>    <span style=color:#0087ff>print</span>(a)
</span></span><span style=display:flex><span>    <span style=color:#5f8700>return</span>
</span></span></code></pre></td></tr></table></div></div><p>The situation we experience more often is that the simple and obvious functions get type annotated, but the complex ones that deal with uncommon types, like declaring types for decorators <code>F = TypeVar('F', bound=Callable[..., Any])</code>, go un-typed. And we expect this! Catching subtle bugs via the mypy type-checking mechanism is a long game.</p><p>Highly effective teams know that type annotation is one of the best ways to make a codebase <em>stronger</em>. I know that&rsquo;s a vague and probably incorrect word to use in the context of software, but it really feels that way in a Python codebase. Without type annotations, it&rsquo;s the blind leading the blind - you need faith that variable names accurately describe the data that code will operate on. &ldquo;Faith&rdquo; is cold-comfort when we start talking SLA&rsquo;s.</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#5f8700>def</span> <span style=color:#0087ff>concatenate_str</span>(x: <span style=color:#0087ff>str</span>, y: <span style=color:#0087ff>str</span>) -&gt; <span style=color:#0087ff>str</span>:
</span></span><span style=display:flex><span>    <span style=color:#5f8700>return</span> x + y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#4e4e4e># the function name said &#39;_str&#39; but our data is &#39;int&#39;</span>
</span></span><span style=display:flex><span>concatenate(<span style=color:#00afaf>1</span>, <span style=color:#00afaf>2</span>) -&gt; <span style=color:#00afaf>3</span>
</span></span></code></pre></td></tr></table></div></div><p>prevent programmer&rsquo;s from making dumb mistakes in their work. I believe that well-designed code is a force multiplier</p><p>The following code will type check, even though the types are wrong. Mypy is a tool for type <strong>annotation</strong>; it&rsquo;s a document of what you want the types to be, and if the types are what you say they are, then the code is type safe.</p><h1 id=lessons>Lessons<a hidden class=anchor aria-hidden=true href=#lessons>#</a></h1><p>So if the investment in type annotations (Mypy) only pays off with a full commitment, the most common scientific libraries are still working on type stubs, and no one has the time or willingness to fully commit, the question is, why even bother?</p><h2 id=1-mindfulness-is-enough-to-prevent-common-mistakes>1. Mindfulness is enough to prevent common mistakes<a hidden class=anchor aria-hidden=true href=#1-mindfulness-is-enough-to-prevent-common-mistakes>#</a></h2><p>Even if they go completely unused in any formal way, just making developers write types prevents dumb mistakes. For Python, this is often <code>Optional[T]</code> vs <code>[T]</code>. <strong>This is not a joke</strong>. Errors like this have led to downtime and rollbacks for production services.</p><blockquote><p>&ldquo;operator &lsquo;>&rsquo; not defined for Int and None&rdquo;</p></blockquote><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#4e4e4e># We have a vague understanding that &#39;a&#39; is an int</span>
</span></span><span style=display:flex><span>__init__(<span style=color:#0087ff>self</span>, val=<span style=color:#d75f00>None</span>):
</span></span><span style=display:flex><span>    func(val)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#4e4e4e># No types - explosion</span>
</span></span><span style=display:flex><span><span style=color:#5f8700>def</span> <span style=color:#0087ff>func</span>(a):
</span></span><span style=display:flex><span>    <span style=color:#5f8700>if</span> a &gt; <span style=color:#00afaf>3</span>:
</span></span><span style=display:flex><span>        <span style=color:#5f8700>return</span> a
</span></span><span style=display:flex><span>    <span style=color:#5f8700>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#5f8700>return</span> -<span style=color:#00afaf>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#4e4e4e># Types annotations remind us that &#39;a&#39; can be None.</span>
</span></span><span style=display:flex><span><span style=color:#4e4e4e># either handle the Optional case (None), or prevent</span>
</span></span><span style=display:flex><span><span style=color:#4e4e4e># ever invoking &#39;func&#39;</span>
</span></span><span style=display:flex><span><span style=color:#5f8700>def</span> <span style=color:#0087ff>func</span>(a: Optional[<span style=color:#0087ff>int</span>]) -&gt; <span style=color:#0087ff>int</span>:
</span></span><span style=display:flex><span>    <span style=color:#5f8700>if</span> a <span style=color:#5f8700>is</span> <span style=color:#d75f00>None</span> <span style=color:#5f8700>or</span> a &lt; <span style=color:#00afaf>3</span>:
</span></span><span style=display:flex><span>        <span style=color:#5f8700>return</span> -<span style=color:#00afaf>1</span>
</span></span><span style=display:flex><span>    <span style=color:#5f8700>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#5f8700>return</span> a
</span></span></code></pre></td></tr></table></div></div><h2 id=2-dont-use-python-for-production-services>2. Don&rsquo;t use Python for production services<a hidden class=anchor aria-hidden=true href=#2-dont-use-python-for-production-services>#</a></h2><p>If your service has SLA&rsquo;s or has multiple downstream services, don&rsquo;t use Python. To have any chance at service stability, you&rsquo;ll need to fully use MyPy, and have some CI hooks that check for type soundness and prevent non type-annotated code from deploying. Your engineers will need to have the MyPy docs open frequently to maintain the type system, and from experience, you&rsquo;ll get a lot of complaints.</p><blockquote><p>&ldquo;I know this code works - our test-suite passes, why am I wasting time getting MyPy to stop complaining about an unbound type?&rdquo;</p></blockquote><p>If you have to maintain a type system anyways, it&rsquo;s easier to choose a statically typed language where the compiler builds in type-checking. Also, most popular IDE&rsquo;s for statically typed languages have type hints - so by choosing Python you&rsquo;re just increasing the cognitive load for developers.</p><h2 id=3-configure-mypy-to-prevent-returning-any>3. Configure MyPy to prevent returning Any<a hidden class=anchor aria-hidden=true href=#3-configure-mypy-to-prevent-returning-any>#</a></h2><p>Developers are people, and people can be lazy. The laziest way to get around MyPy errors is to return type <code>Any</code> - the supertype of all types. This is like returning <code>Any</code> in Scala; as a last resort developers will do this to satisfy the type-checker so they can keep moving. Stop them, or at least make them annotate in code every time they really mean to return <code>Any</code>. Keep the MyPy file as concise as possible, but fail on any errors reported.</p><div class=highlight><div style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#454545">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#8a8a8a;background-color:#1c1c1c;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span><span style=color:#d75f00># file: mypy.ini
</span></span></span><span style=display:flex><span><span style=color:#d75f00></span>
</span></span><span style=display:flex><span><span style=color:#d75f00># global options:
</span></span></span><span style=display:flex><span><span style=color:#d75f00></span>
</span></span><span style=display:flex><span>[mypy]
</span></span><span style=display:flex><span>warn_return_any = True
</span></span></code></pre></td></tr></table></div></div><h1 id=takeways>Takeways<a hidden class=anchor aria-hidden=true href=#takeways>#</a></h1><p>There&rsquo;s truth to the criticisms of trying to use Python in production. I&rsquo;ve personally found that types lead to better code, and try to avoid dynamically typed code without type annotations at all costs - the extra time it takes to reconcile types always leads to stronger production code. It isn&rsquo;t static vs. dynamic, but instead interpreted vs. compiled that is the main differentiator in developer productivity.</p><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><p>[1] Types for anyone who knows a programming language: <a href="https://www.destroyallsoftware.com/compendium/types?share_key=baf6b67369843fa2">https://www.destroyallsoftware.com/compendium/types?share_key=baf6b67369843fa2</a></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://goodmattg.github.io>Matt's Log</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>